# 2021年Redis面试题大汇总附答案

### 全部面试题答案，更新日期：01月30日，直接下载吧！

### 下载链接：[高清500+份面试题资料及电子书，累计 10000+ 页大厂面试题  PDF](/docs/index.md)

## Redis

### 题1：[Redis 过期键都有哪些删除策略？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题1redis-过期键都有哪些删除策略)<br/>
Redis是key-value数据库，可以设置Redis中缓存key的过期时间。

Redis的过期策略是指当Redis中缓存的key过期，Redis是如何处理。

常见的删除策略有以下三种：

**定时删除**

在设置key的过期时间的同时，创建一个定时器，让定时器到过期时间就立即执行对key的删除操作。

需要注意的是这种策略可以立即清除过期的数据，对内存很友好；但是会占用大量的CPU资源去处理过期的数据，从而影响缓存的响应时间和吞吐量。

**惰性删除**

只有当访问一个key时，才会判断这个key是否已过期，若果过期急就删除，反之没有过期，就返回该key。

需要注意的是这种策略可以最大化地节省CPU资源，但是对内存非常不友好。甚至极端情况可能出现大量的过期key，因没有再次被访问从而不会被清除，占用大量内存。

**定期删除**

每隔一段时间，程序对数据库进行一次检查，删除里面的过期键，至于要删除哪些数据库的哪些过期键，则由算法决定。

每隔一定的时间，程序会扫描一定数量的数据库的expires字典中一定数量的key并删除其中已过期的key。至于要删除哪些数据库的哪些过期key，则由算法决定。

需要注意的是这种策略是前两者的一个折中方案。通过调整定时扫描的时间间隔和每次扫描的限定耗时，可以在不同情况下使得CPU和内存资源达到最优的平衡效果。

>expires字典保存所有设置过期key的过期时间数据。
key是指向键空间中的某个键的指针，value是该键的毫秒精度的UNIX时间戳表示的过期时间。
键空间是指该Redis集群中保存的所有键。

其中定时删除和定期删除为主动删除策略，惰性删除为被动删除策略，Redis中同时使用了惰性删除和定期删除两种删除策略。

### 题2：[Redis 集群会产生数据丢失情况吗？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题2redis-集群会产生数据丢失情况吗)<br/>
Redis并不能保证数据的强一致性，也就是说在实际中Redis集群在特定的条件下可能会产生数据丢失的情况。

### 题3：[Redis 是单线程的吗？为什么这么快？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题3redis-是单线程的吗为什么这么快)<br/>
Redis是单线程的，至于为什么这么快主要是因如下几方面：

1）Redis是纯内存数据库，一般都是简单的存取操作，线程占用的时间很多，时间的花费主要集中在IO上，所以读取速度快。

2）Redis使用的是非阻塞IO、IO多路复用，使用了单线程来轮询描述符，将数据库的开、关、读、写都转换成了事件，减少了线程切换时上下文的切换和竞争。

3）Redis采用了单线程的模型，保证了每个操作的原子性，也减少了线程的上下文切换和竞争。

4）Redis避免了多线程的锁的消耗。

5）Redis采用自己实现的事件分离器，效率比较高，内部采用非阻塞的执行方式，吞吐能力比较大

### 题4：[支持一致性哈希的客户端有哪些？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题4支持一致性哈希的客户端有哪些)<br/>
Redis-rb、Predis等。

### 题5：[为什么 Redis 需把数据放到内存中？　](/docs/Redis/2021年Redis面试题大汇总附答案.md#题5为什么-redis-需把数据放到内存中　)<br/>
若不将数据读到内存中，磁盘I/O速度会严重影响Redis的性能。

Redis具有快速和数据持久化的特征。

Redis为了提高读写时的速度将数据读到内存中，并通过异步的方式将数据写入磁盘。

注：若设置最大使用内存，则数据已有记录数达到内存限值后不能继续插入新值。

为什么内存读取比磁盘读取数据速度快？

1）内存是电器元件，利用高低电平存储数据，而磁盘是机械元件，电气原件速度超快，而磁盘由于在每个磁盘块切换时磁头会消耗很多时间，说白了就是IO时间长，两者性能没发比较。

2）磁盘的数据进行操作时也是读取到内存中交由CPU进行处理操作，因此直接放在内存中的数据，读取速度肯定快很多。


### 题6：[Jedis 和 Redisson 有什么优缺点？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题6jedis-和-redisson-有什么优缺点)<br/>
Jedis是Redis的Java实现的客户端，其API提供了比较全面的Redis命令的支持

Redisson实现了分布式和可扩展的Java数据结构，和Jedis相比，功能较为简单，不支持字符串操作，不支持排序、事务、管道、分区等Redis特性。

Redisson的宗旨是促进使用者对Redis的关注分离，从而让使用者能够将精力更集中地放在处理业务逻辑上。

### 题7：[为什么 Redis 集群的最大槽数是 16384 个？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题7为什么-redis-集群的最大槽数是-16384-个)<br/>
在redis节点发送心跳包时需要把所有的槽放到这个心跳包中，以便让节点知道当前集群信息，即16384=16k，在发送心跳包时使用char进行bitmap压缩后是2k（2*8 (8bit)*1024(1k)=16K），也就是说使用2k的空间创建了16k的槽数。

虽然使用CRC16算法最多可以分配65535（2^16-1）个槽位，即65535=65k，压缩后就是8k（8*8 (8 bit)*1024(1k)=65K），也就是说需要8k的心跳包，并且一般情况下一个redis集群不会有超过1000个master节点，所以16k的槽位是个比较合适的选择。

### 题8：[Redis 事务支持隔离性吗？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题8redis-事务支持隔离性吗)<br/>
Redis是单进程程序且保证在执行事务时，不会对事务进行中断，事务可以运行直到执行完所有事务队列中的命令为止。因此，Redis的事务是总是带有隔离性的。

### 题9：[Redis 如何查看使用情况及状态信息？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题9redis-如何查看使用情况及状态信息)<br/>
使用info命令。

### 题10：[Redis 事务命令都有哪几个？](/docs/Redis/2021年Redis面试题大汇总附答案.md#题10redis-事务命令都有哪几个)<br/>
MULTI、EXEC、DISCARD、WATCH

multi：标记一个事务块的开始，返回ok。

exec：执行所有事务块内，事务块内所有命令执行的先后顺序的返回值，操作被，返回空值nil。

discard：取消事务，放弃执行事务块内的所有命令，返回ok。

watch：监视key在事务执行之前是否被其他指令改动，若已修改则事务内的指令取消执行，返回ok。

unwatch：取消watch命令对key的监视，返回ok。

### 题11：redis-如何设置密码及验证密码<br/>


### 题12：redis-集群如何选择数据库<br/>


### 题13：redis-中如何解决-the-tcp-backlog-setting-of-511-cannot-be-enforced-告警问题<br/>


### 题14：redis主要占用什么物理资源<br/>


### 题15：redis-集群之间是如何复制的<br/>


### 题16：redis-中如何解决-thp-服务导致的延迟和内存使用问题<br/>


### 题17：redis-和-memcached-都有哪些区别<br/>


### 题18：redis-支持那些数据类型<br/>


### 题19：redis-事务能否保证原子性是否支持回滚吗<br/>


### 题20：redis-中如何解决-overcommit_memory-is-set-to-0-告警问题<br/>


### 题21：redis-如何测试连通性<br/>


### 题22：什么是-redis<br/>


### 题23：redis-各数据类型最大容量是多少<br/>


### 题24：redis-回收进程是如何工作的<br/>


### 题25：redis-和-redisson-有什么区别和关系<br/>


![大厂面试题](../../imgs/pages.jpg "Java精选")

![大厂面试题](../../imgs/pdfs.png "Java精选")

![大厂面试题](../../imgs/weixin.png "Java精选")