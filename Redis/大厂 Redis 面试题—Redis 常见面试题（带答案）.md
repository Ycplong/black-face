# 大厂 Redis 面试题—Redis 常见面试题（带答案）

### 全部面试题答案，更新日期：12月30日，直接下载吧！

### 下载链接：[高清500+份面试题资料及电子书，累计 10000+ 页大厂面试题  PDF](/docs/index.md)

## Redis

### 题1：[Redis 中分布式锁有什么缺陷性问题？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题1redis-中分布式锁有什么缺陷性问题)<br/>
Redis分布式锁不能解决超时的问题，分布式锁有一个超时时间，程序的执行如果超出了锁的超时时间就会出现问题。

### 题2：[Redis 和其他key-value存储有什么不同？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题2redis-和其他key-value存储有什么不同)<br/>
Redis有着更为复杂的数据结构并且提供对他们的原子性操作，这是一个不同于其他数据库的进化路径。

Redis数据类型都是基于基本数据结构，同时对开发人员透明，无需进行额外的抽象。

Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，应为数据量不能大于硬件内存。

内存数据库方面的优点是在内存比在磁盘上相同复杂的数据结构上操作更为简单，这样Redis可以做很多内部复杂性很强的事情。同时，在磁盘格式方面它们是紧凑并以追加的方式产生，因为它们并不需要进行随机访问。

### 题3：[Redis key 如何设置过期时间和永久有效？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题3redis-key-如何设置过期时间和永久有效)<br/>
Redis key设置过期时间使用EXPIRE命令。

Redis key设置永久有效使用PERSIST命令。

### 题4：[什么是 Redis 持久化？Redis 有哪几种持久化方式？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题4什么是-redis-持久化redis-有哪几种持久化方式)<br/>
Redis持久化是指把内存的数据写到磁盘中去，防止服务因宕机导致内存数据丢失。

Redis提供了两种持久化方式：RDB（默认）和AOF。

RDB是Redis DataBase缩写，功能核心函数rdbSave（生成RDB文件）和rdbLoad（从文件加载内存）两个函数。

AOF是Append-only file缩写，每当执行服务器（定时）任务或者函数时flushAppendOnlyFile函数都会被调用，这个函数执行以下两个工作。

**AOF写入与保存**

WRITE：根据条件，将aof_buf中的缓存写入到AOF文件

SAVE：根据条件，调用fsync或fdatasync函数，将AOF文件保存到磁盘中。

### 题5：[Redis 都有哪些使用场景？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题5redis-都有哪些使用场景)<br/>
1、延迟操作

订单入库时数据量过于庞大，可以用于Redis缓存数据量，减轻数据库压力，再分批处理数据。

2、点赞、好友等相互关系

3、Session共享

使用Redis可以实现单点登录，通过expire控制是否失效问题。

4、分布式锁

5、计数器

6、排行榜

使用Redis中SortedSet类型进行数据的排序。

7、模糊搜索

数据量大时可以使用Redis缓存，进行模糊搜索。

8、队列

Redis支持list push和list pop命令，因此很方便的执行队列操作。

### 题6：[Redis 回收使用的是什么算法？ ](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题6redis-回收使用的是什么算法-)<br/>
Redis回收使用的是LRU算法。

LRU是Least Recently Used的缩写，即最近最少使用页面置换算法，是为虚拟页式存储管理服务的。

### 题7：[为什么 Redis 集群的最大槽数是 16384 个？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题7为什么-redis-集群的最大槽数是-16384-个)<br/>
在redis节点发送心跳包时需要把所有的槽放到这个心跳包中，以便让节点知道当前集群信息，即16384=16k，在发送心跳包时使用char进行bitmap压缩后是2k（2*8 (8bit)*1024(1k)=16K），也就是说使用2k的空间创建了16k的槽数。

虽然使用CRC16算法最多可以分配65535（2^16-1）个槽位，即65535=65k，压缩后就是8k（8*8 (8 bit)*1024(1k)=65K），也就是说需要8k的心跳包，并且一般情况下一个redis集群不会有超过1000个master节点，所以16k的槽位是个比较合适的选择。

### 题8：[什么是缓存雪崩？何如避免？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题8什么是缓存雪崩何如避免)<br/>
缓存雪崩是指当缓存服务器重启或大量缓存集中在某一个时间段内失效，这样在失效时，会给后端系统带来很大压力，导致系统崩溃。

**如何避免？**

1）在缓存失效后，使用加锁或队列的方式来控制读数据库写缓存的线程数量。如对某个key只允许一个线程查询数据和写缓存，其他线程等待。

2）实现二级缓存方式，A1为原始缓存，A2为拷贝缓存，A1失效时，切换访问A2，A1缓存失效时间设置为短期，A2设置为长期。

3）不同的key，设置不同的过期时间，让缓存失效的时间点尽量均匀。

### 题9：[Redis主要占用什么物理资源？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题9redis主要占用什么物理资源)<br/>
内存资源。

### 题10：[Redis 集群如何选择数据库？](/docs/Redis/大厂%20Redis%20面试题—Redis%20常见面试题（带答案）.md#题10redis-集群如何选择数据库)<br/>
Redis集群目前无法做数据库选择，默认在0数据库。

![大厂面试题](../../imgs/pages.jpg "Java精选")

![大厂面试题](../../imgs/pdfs.png "Java精选")

![大厂面试题](../../imgs/weixin.png "Java精选")